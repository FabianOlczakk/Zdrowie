#:import Ustawienia ustawienia
#:import Map map
#:import Aktualnosci news
#:import Show phone_numbers
#:import images_path kivymd.images_path
#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import MDList kivymd.uix.list

<OneLineFilterList>:
    on_release: self.parent.parent.country_filter.set_default_country(self.text)
    IconLeftWidget:
        icon: root.icon

<ClickToArticle>:
    text: "Czytaj dalej"
    secondary_text: "Kliknij aby otworzy\u0107 artyku\u0142"

    IconLeftWidget:
        icon: "book-open-page-variant"

<AsyncFitImage>:
    allow_stretch: True

<Aktualnosci>:
    orientation: "vertical"
    size_hint_y: None
    height: self.minimum_height + 20
    spacing: "30dp"
    padding: 5, 0, 5, 10

<Show>:

<PhoneContent>:

<SecondScreen>:

<CountryOneLineIconListItem>:
    on_release:
        self.parent.down_button(self.text)
        root.parent.parent.parent.parent.current: 'phone_number_list'


<CustomOneLineIconListItem>:
    on_release: self.parent.parent.search_box.set_coordinates(self.text)
    IconLeftWidget:
        icon: root.icon

<CountryDialog>:
    title_color: [0, 0, 0, 1]
    separator_color: app.theme_cls.primary_color
    title_size: 24
    background: "images/white_background.png"
    orientation: "vertical"
    size_hint_y: None
    size_hint: .8, .5
    padding: 20
    spacing: 20
    BoxLayout:
        orientation: "vertical"
        GridLayout:
            cols: 2

            MDLabel:
                text: root.country_name
                font_style: "H4"

            AsyncImage:
                source: root.flag_source

        GridLayout:
            cols: 2
            # spacing: dp(50)
            MDLabel:
                text: u"Liczba zaka\u017ce\u0144" if app.language == "pl" else "Number of cases"
            MDLabel:
                text: root.cases
            MDLabel:
                text: u"Liczba zgon\u00F3w" if app.language == "pl" else "Number of deaths"
            MDLabel:
                text: root.deaths
            MDLabel:
                text: u"Liczba wyzdrowie\u0144" if app.language == "pl" else "Number of recoveries"
            MDLabel:
                text: root.recoveries

<Map>:

<ToolbarWithImage>:

<ItemDrawer>:
    theme_text_color: "Custom"
    on_release: self.parent.set_color_item(self)

    IconLeftWidget:
        id: icon
        icon: root.icon
        theme_text_color: "Custom"
        text_color: root.text_color

<ItemDrawerException>:
    theme_text_color: "Custom"

    IconLeftWidget:
        id: icon
        icon: root.icon
        theme_text_color: "Custom"
        text_color: root.text_color


<ContentNavigationDrawer>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "8dp"
    anchor: anchor

    AnchorLayout:
        id: anchor
        clock: clock
        anchor_x: "center"
        size_hint_y: None
        height: clock.height

        DateTimeClock:
            id: clock
            orientation: "vertical"

            TimeLabel:
                clock: clock
                color: app.theme_cls.primary_dark
                halign: "center"
                font_style: "H4"
                size_hint_y: None
                height: self.texture_size[1]

            DateLabel:
                clock: clock
                color: app.theme_cls.primary_light
                halign: "center"
                font_style: "H6"
                size_hint_y: None
                height: self.texture_size[1]
                text: clock.date

    ScrollView:
        DrawerList:
            id: md_list
            ItemDrawer:
                icon: "home"
                text: u"Ekran g\u0142\u00F3wny" if app.language == "pl" else "Home screen"
                text_color: self.theme_cls.primary_color
                on_release:
                    root.secondary_screen_manager.current = "home_screen"
            ItemDrawer:
                icon: "earth"
                text: u"Wiadomo\u015Bci" if app.language == "pl" else "News"
                on_release:
                    root.secondary_screen_manager.current = "news"
            ItemDrawer:
                icon: "map-legend"
                text: "Mapa COVID-19" if app.language == "pl" else "COVID-19 Map"
                on_release:
                    root.corona_map.start_get_markers_in_fov()
                    root.secondary_screen_manager.current = "map"

            ItemDrawer:
                icon: "contact-phone"
                text: "Numery pomocy" if app.language == "pl" else "Emergency phone numbers"
                on_release:
                    root.secondary_screen_manager.current = "phone_numbers"
            ItemDrawerException:
                icon: "settings"
                text: "Ustawienia" if app.language == "pl" else "Settings"
                on_release: root.main_screen_manager.current = "settings"




Screen:

    ScreenManager:
        id: main_screen_manager
        transition: SlideTransition()

        Screen:
            name: "main_screen"

            ToolbarWithImage:
                pos_hint: {"top": 1}
                image_source: "images/logo_light.png"
                id: toolbar
                anchor_title: "center"
                elevation: 10
                right_action_items: [['', lambda x: print("woohoo")]]
                left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]

            NavigationLayout:
                x: toolbar.height

                ScreenManager:
                    id: secondary_screen_manager
                    transition: SwapTransition()

                    Screen:
                        name: "home_screen"
                        size_hint_y: 1.0 - toolbar.height/root.height

                        MDLabel:
                            pos: self.pos
                            text: "Ekran glowny"

                    Screen:
                        name: "news"
                        size_hint_y: 1.0 - toolbar.height/root.height

                        MDScrollViewRefreshLayout:
                            id: scroll_view_aktualnosci
                            do_scroll_x: False
                            do_scroll_y: True
                            root_layout: root
                            refresh_callback: aktualnosci.refresh_callback

                            Aktualnosci:
                                root: root
                                id: aktualnosci
                                screen_manager: secondary_screen_manager
                                login_to_app: main_screen_manager
                                scroll_view_aktualnosci: scroll_view_aktualnosci

                                MDCard:
                                    header_image: header_image1
                                    header_text: header_text1
                                    sub_text: sub_text1
                                    link: link1
                                    orientation: "vertical"
                                    size_hint: .99, None
                                    height: box_top1.height + box_bottom1.height + box_more1.height
                                    focus_behavior: True
                                    ripple_behavior: True
                                    pos_hint: {"center_x": .5}

                                    BoxLayout:
                                        id: box_top1
                                        size_hint: 1, None
                                        orientation: "vertical"
                                        height: root.height / 3.5

                                        AsyncFitImage:
                                            id: header_image1
                                            size_hint: 1, None
                                            height: box_top1.height
                                            allow_stretch: True

                                    BoxLayout:
                                        id: box_bottom1
                                        size_hint: 1, None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        spacing: "10dp"
                                        padding: "10dp"

                                        MDLabel:
                                            id: header_text1
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                                            halign: "center"
                                            theme_text_color: "Primary"
                                            font_style: "H5"
                                            bold: True
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        MDLabel:
                                            id: sub_text1
                                            halign: "justify"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a lectus sed libero varius varius eu ut metus. Aliquam turpis ex, posuere nec volutpat eu, facilisis nec elit. Aenean pharetra id risus at vestibulum. Suspendisse potenti. Phasellus quis nulla leo. Etiam lacinia a erat in maximus. Cras facilisis mi ut gravida bibendum. Vestibulum quis lacinia odio, et malesuada justo."
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            theme_text_color: "Secondary"

                                    MDSeparator:

                                    BoxLayout:
                                        id: box_more1
                                        size_hint: 1, None
                                        height: self.minimum_height

                                        ClickToArticle:
                                            id: link1
                                            on_release:
                                                aktualnosci.load_article(self.index)
                                MDCard:
                                    header_text: header_text2
                                    sub_text: sub_text2
                                    header_image: header_image2
                                    link: link2
                                    orientation: "vertical"
                                    size_hint: .99, None
                                    height: box_top2.height + box_bottom2.height + box_more2.height
                                    focus_behavior: True
                                    ripple_behavior: True
                                    pos_hint: {"center_x": .5}

                                    BoxLayout:
                                        id: box_top2
                                        size_hint: 1, None
                                        orientation: "vertical"
                                        height: root.height / 3.5

                                        AsyncFitImage:
                                            id: header_image2
                                            size_hint: 1, None
                                            height: box_top2.height
                                            allow_stretch: True

                                    BoxLayout:
                                        id: box_bottom2
                                        size_hint: 1, None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        spacing: "10dp"
                                        padding: "10dp"

                                        MDLabel:
                                            id: header_text2
                                            halign: "center"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                                            theme_text_color: "Primary"
                                            font_style: "H5"
                                            bold: True
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        MDLabel:
                                            id: sub_text2
                                            halign: "justify"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a lectus sed libero varius varius eu ut metus. Aliquam turpis ex, posuere nec volutpat eu, facilisis nec elit. Aenean pharetra id risus at vestibulum. Suspendisse potenti. Phasellus quis nulla leo. Etiam lacinia a erat in maximus. Cras facilisis mi ut gravida bibendum. Vestibulum quis lacinia odio, et malesuada justo."
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            theme_text_color: "Secondary"

                                    MDSeparator:

                                    BoxLayout:
                                        id: box_more2
                                        size_hint: 1, None
                                        height: self.minimum_height

                                        ClickToArticle:
                                            id: link2
                                            on_release:
                                                aktualnosci.load_article(self.index)


                                MDCard:
                                    header_text: header_text3
                                    sub_text: sub_text3
                                    header_image: header_image3
                                    link: link3
                                    orientation: "vertical"
                                    size_hint: .99, None
                                    height: box_top3.height + box_bottom3.height + box_more3.height
                                    focus_behavior: True
                                    ripple_behavior: True
                                    pos_hint: {"center_x": .5}

                                    BoxLayout:
                                        id: box_top3
                                        size_hint: 1, None
                                        orientation: "vertical"
                                        height: root.height / 3.5

                                        AsyncFitImage:
                                            id: header_image3
                                            size_hint: 1, None
                                            height: box_top3.height
                                            allow_stretch: True

                                    BoxLayout:
                                        id: box_bottom3
                                        size_hint: 1, None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        spacing: "10dp"
                                        padding: "10dp"

                                        MDLabel:
                                            id: header_text3
                                            halign: "center"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                                            theme_text_color: "Primary"
                                            font_style: "H5"
                                            bold: True
                                            size_hint_y: None
                                            height: self.texture_size[1]

                                        MDLabel:
                                            id: sub_text3
                                            halign: "justify"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a lectus sed libero varius varius eu ut metus. Aliquam turpis ex, posuere nec volutpat eu, facilisis nec elit. Aenean pharetra id risus at vestibulum. Suspendisse potenti. Phasellus quis nulla leo. Etiam lacinia a erat in maximus. Cras facilisis mi ut gravida bibendum. Vestibulum quis lacinia odio, et malesuada justo."
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            theme_text_color: "Secondary"

                                    MDSeparator:

                                    BoxLayout:
                                        id: box_more3
                                        size_hint: 1, None
                                        height: self.minimum_height

                                        ClickToArticle:
                                            id: link3
                                            on_release:
                                                aktualnosci.load_article(self.index)

                                MDCard:
                                    header_text: header_text4
                                    sub_text: sub_text4
                                    header_image: header_image4
                                    link: link4
                                    orientation: "vertical"
                                    size_hint: .99, None
                                    height: box_top4.height + box_bottom4.height + box_more4.height
                                    focus_behavior: True
                                    ripple_behavior: True
                                    pos_hint: {"center_x": .5}

                                    BoxLayout:
                                        id: box_top4
                                        size_hint: 1, None
                                        orientation: "vertical"
                                        height: root.height / 3.5

                                        AsyncFitImage:
                                            id: header_image4
                                            size_hint: 1, None
                                            height: box_top4.height
                                            allow_stretch: True

                                    BoxLayout:
                                        id: box_bottom4
                                        size_hint: 1, None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        spacing: "10dp"
                                        padding: "10dp"

                                        MDLabel:
                                            id: header_text4
                                            halign: "center"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                                            theme_text_color: "Primary"
                                            font_style: "H5"
                                            bold: True
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        MDLabel:
                                            id: sub_text4
                                            halign: "justify"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a lectus sed libero varius varius eu ut metus. Aliquam turpis ex, posuere nec volutpat eu, facilisis nec elit. Aenean pharetra id risus at vestibulum. Suspendisse potenti. Phasellus quis nulla leo. Etiam lacinia a erat in maximus. Cras facilisis mi ut gravida bibendum. Vestibulum quis lacinia odio, et malesuada justo."
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            theme_text_color: "Secondary"

                                    MDSeparator:

                                    BoxLayout:
                                        id: box_more4
                                        size_hint: 1, None
                                        height: self.minimum_height

                                        ClickToArticle:
                                            id: link4
                                            on_release:
                                                aktualnosci.load_article(self.index)

                                MDCard:
                                    header_text: header_text5
                                    sub_text: sub_text5
                                    header_image: header_image5
                                    link: link5
                                    orientation: "vertical"
                                    size_hint: .99, None
                                    height: box_top5.height + box_bottom5.height + box_more5.height
                                    focus_behavior: True
                                    ripple_behavior: True
                                    pos_hint: {"center_x": .5}

                                    BoxLayout:
                                        id: box_top5
                                        size_hint: 1, None
                                        orientation: "vertical"
                                        height: root.height / 3.5

                                        AsyncFitImage:
                                            id: header_image5
                                            size_hint: 1, None
                                            height: box_top5.height
                                            allow_stretch: True

                                    BoxLayout:
                                        id: box_bottom5
                                        size_hint: 1, None
                                        height: self.minimum_height
                                        orientation: "vertical"
                                        spacing: "10dp"
                                        padding: "10dp"

                                        MDLabel:
                                            id: header_text5
                                            halign: "center"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                                            theme_text_color: "Primary"
                                            font_style: "H5"
                                            bold: True
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        MDLabel:
                                            id: sub_text5
                                            halign: "justify"
                                            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a lectus sed libero varius varius eu ut metus. Aliquam turpis ex, posuere nec volutpat eu, facilisis nec elit. Aenean pharetra id risus at vestibulum. Suspendisse potenti. Phasellus quis nulla leo. Etiam lacinia a erat in maximus. Cras facilisis mi ut gravida bibendum. Vestibulum quis lacinia odio, et malesuada justo."
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                            theme_text_color: "Secondary"

                                    MDSeparator:

                                    BoxLayout:
                                        id: box_more5
                                        size_hint: 1, None
                                        height: self.minimum_height

                                        ClickToArticle:
                                            id: link5
                                            on_release:
                                                aktualnosci.load_article(self.index)


                    Screen:
                        size_hint_y: 1.0 - toolbar.height/root.height
                        name: "map"

                        Map:
                            id: corona_map
                            language: app.language
                            country_field: country_field
                            main_screen_manager: main_screen_manager
                            search_box: search_box
                            double_tap_zoom: True
                            zoom: 3
                            on_zoom:
                                self.zoom = 3 if self.zoom < 3 else self.zoom

                            on_lat:
                                self.start_get_markers_in_fov()

                            on_lon:
                                self.start_get_markers_in_fov()

                        MDFloatingActionButtonSpeedDial:
                            data: corona_map.menu_data
                            hint_animation: True
                            icon: "menu-open"
                            callback: corona_map.menu_data_callback
                            md_bg_color: app.theme_cls.primary_color
                            elevation_normal: 10

                    Screen:
                        size_hint_y: 1.0 - toolbar.height/root.height
                        name: "phone_numbers"

                        ScreenManager:
                            id: phone_number_screen_manager
                            Screen:
                                name: 'country_list'
                                ScrollView:
                                    Show:
                                        id: show
                                        phone_number_screen_manager: phone_number_screen_manager
                                        phone_container: phone_container
                                        phone_list_container: phone_list_container
                                        phone_provinces: phone_provinces

                            Screen:
                                name: 'phone_number_list'
                                ScrollView:
                                    MDGridLayout:
                                        id: phone_container
                                        adaptive_height: True
                                        cols: 1
                                        MDList:
                                            id: phone_list_container
                                            OneLineIconListItem:
                                                phone_number_screen_manager: phone_number_screen_manager
                                                phone_container: phone_container
                                                show: show
                                                text: 'Wróć do wyboru kraju'
                                                on_release:
                                                    phone_number_screen_manager.current = 'country_list'
                                                    show.clear_screen()
                                                IconLeftWidget:
                                                    icon: 'arrow-left'


                            Screen:
                                name: 'phone_provinces'
                                ScrollView:
                                    MDGridLayout:
                                        adaptive_height: True
                                        cols: 1
                                        id: phone_provinces
                                        MDList:
                                            id: second_phone_list_container
                                            OneLineIconListItem:
                                                phone_number_screen_manager: phone_number_screen_manager
                                                phone_container: phone_container
                                                show: show
                                                text: 'Wróć do wyboru kraju'
                                                on_release:
                                                    phone_number_screen_manager.current = 'country_list'
                                                    show.clear_provinces()
                                                IconLeftWidget:
                                                    icon: 'arrow-left'



            MDNavigationDrawer:
                id: nav_drawer

                ContentNavigationDrawer:
                    id: content_drawer
                    main_screen_manager: main_screen_manager
                    secondary_screen_manager: secondary_screen_manager
                    corona_map: corona_map


        Screen:
            name: "settings"

            MDToolbar:
                type: "top"
                id: settings_toolbar
                ustawienia: ustawienia
                pos_hint: {"top": 1}
                title: "Ustawienia" if app.language == "pl" else "Settings"
                anchor_title: "center"
                bold: False
                elevation: 10
                right_action_items: [["", lambda x: x]]
                left_action_items:
                    [['arrow-left', lambda x: ustawienia.back_to_home_screen()]]

            Screen:
                size_hint_y: 1.0 - settings_toolbar.height/root.height

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True

                    BoxLayout:
                        id: list
                        size_hint: 1, None
                        height: self.minimum_height
                        orientation: "vertical"

                        TwoLineIconListItem:
                            text: "Kolor aplikacji" if app.language == "pl" else "App color"
                            secondary_text: "Zmie\u0144 kolor aplikacji" if app.language == "pl" else "Change the app color"
                            on_release:
                                ustawienia.open_theme_picker()

                            IconLeftWidget:
                                icon: "format-color-fill"

                        TwoLineIconListItem:
                            text: u"J\u0119zyk" if app.language == "pl" else "Language"
                            secondary_text: "Zmie\u0144 j\u0119zyk aplikacji" if app.language == "pl" else "Change the display language"
                            on_release:
                                ustawienia.open_language_selector()

                            IconLeftWidget:
                                icon: "earth"

                        TwoLineIconListItem:
                            text: u"Kraj domy\u015Blny" if app.language == "pl" else "Set default country"
                            secondary_text: "Zmie\u0144 kraj domy\u015Blny, wy\u015Bwietlany na ekranie g\u0142\u00F3wny." if app.language == "pl" else "Change the default country, displayed on the home screen"
                            on_release:
                                ustawienia.open_country_selector()

                            IconLeftWidget:
                                icon: "home"
        Screen:
            name: "search_dialog"

            MDToolbar:
                type: "top"
                id: search_toolbar
                ustawienia: ustawienia
                pos_hint: {"top": 1}
                title: "Wyszukaj kraj" if app.language == "pl" else "Search"
                anchor_title: "center"
                bold: False
                elevation: 10
                right_action_items: [["", lambda x: x]]
                left_action_items:
                    [['arrow-left', lambda x: ustawienia.back_to_home_screen()]]

            SearchBox:
                size_hint_y: 1.0 - search_toolbar.height/root.height
                id: search_box
                rv: rv
                country_field: country_field
                corona_map: corona_map
                ustawienia: ustawienia

                BoxLayout:

                    rv: rv
                    country_field: country_field
                    corona_map: corona_map
                    orientation: "vertical"
                    padding: "20dp"
                    spacing: "10dp"

                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height

                        MDTextField:
                            id: country_field
                            search_box: search_box
                            hint_text: "Kraj" if app.language == "pl" else "Contry name"
                            helper_text: u"Wpisz nazw\u0119 kraju"  if app.language == "pl" else "Type the country name"
                            helper_text_mode: "on_focus"
                            on_text: search_box.set_country_filter(self.text, True)


                    RecycleView:
                        id: rv
                        search_box: search_box
                        key_viewclass: 'viewclass'
                        key_size: 'height'

                        RecycleBoxLayout:
                            padding: dp(10)
                            default_size: None, dp(48)
                            default_size_hint: 1, None
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: 'vertical'




        Screen:
            name: "language_settings"

            MDToolbar:
                type: "top"
                id: language_toolbar
                ustawienia: ustawienia
                pos_hint: {"top": 1}
                title: u"J\u0119zyk" if app.language == "pl" else "Language"
                anchor_title: "center"
                bold: False
                elevation: 10
                right_action_items: [["", lambda x: x]]
                left_action_items:
                    [['arrow-left', lambda x: ustawienia.back_to_settings()]]

            Screen:
                size_hint_y: 1.0 - language_toolbar.height/root.height

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    Ustawienia:
                        orientation: "vertical"
                        main_screen_manager: main_screen_manager
                        secondary_screen_manager: secondary_screen_manager
                        nav_drawer: nav_drawer
                        country_filter: country_filter
                        text_field: text_field
                        app_color: app.color
                        content_drawer: content_drawer
                        id: ustawienia
                        size_hint: 1, None
                        height: self.minimum_height
                        TwoLineIconListItem:
                            text: u"Polski"
                            secondary_text: "Zmie\u0144 j\u0119zyk aplikacji na Polski"

                            on_press:
                                app.set_language_to_pl()

                            IconLeftWidget:
                                icon: "earth"

                        TwoLineIconListItem:
                            text: u"English"
                            secondary_text: "Sets the app language to english"

                            on_press:
                                app.set_language_to_en()

                            IconLeftWidget:
                                icon: "earth"

        Screen:
            name: "default_country"

            MDToolbar:
                type: "top"
                id: country_toolbar
                ustawienia: ustawienia
                pos_hint: {"top": 1}
                title: u"Kraj domy\u015Blny" if app.language == "pl" else "Default country"
                anchor_title: "center"
                bold: False
                elevation: 10
                right_action_items: [["", lambda x: x]]
                left_action_items:
                    [['arrow-left', lambda x: ustawienia.back_to_settings()]]

            CountryFilter:
                size_hint_y: 1.0 - country_toolbar.height/root.height
                id: country_filter
                recycle_view: recycle_view
                text_filed: text_field
                corona_map: corona_map
                map: corona_map
                language: app.language
                default_country: app.default_country
                ustawienia: ustawienia

                BoxLayout:
                    recycle_view: recycle_view
                    country_field: country_field
                    corona_map: corona_map
                    orientation: "vertical"
                    padding: "20dp"
                    spacing: "10dp"

                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height

                        MDTextField:
                            id: text_field
                            country_filter: country_filter
                            hint_text: "Kraj" if app.language == "pl" else "Contry name"
                            helper_text: u"Wpisz nazw\u0119 kraju"  if app.language == "pl" else "Type the country name"
                            helper_text_mode: "on_focus"
                            on_text: country_filter.set_country_filter(self.text, True)


                    RecycleView:
                        id: recycle_view
                        country_filter: country_filter
                        key_viewclass: 'viewclass'
                        key_size: 'height'

                        RecycleBoxLayout:
                            padding: dp(10)
                            default_size: None, dp(48)
                            default_size_hint: 1, None
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: 'vertical'